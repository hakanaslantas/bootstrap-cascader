!function(f){"use strict";var t={forceSelect:!1,splitChar:" ",cls:"",btnCls:"btn-default",placeHolder:"请选择",dropUp:!1,lazy:!1,openOnHover:!1,openOnHoverDelay:100,openOnHoverDelay4Lazy:200,isSelectable:function(e){return e&&(!0===e.selectable||e.loaded&&(!e.children||e.children.length<=0)&&!1!==e.selectable)}},s='<div class="btn-group bootstrap-cascader form-control"></div>',r='<button class="btn dropdown-toggle bs-placeholder" type="button">        <span class="filter-option pull-left"></span> <span class="caret icon-arrow-down"></span> <span class="icon-cross bscascader-font icon-jiaochacross78"></span>      </button>',h='<ul class="dropdown-menu"></ul>',u='<li>        <a href="javascript:">          <span class="text"></span>          <span class="bscascader-font icon-ico-right-arrow item-right-arrow"></span>          <span class="bscascader-font icon-loading item-loading"></span>          <span class="bscascader-font icon-error"></span>        </a>      </li>',m=function(e){return e?String(e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):""},d=function(e,i,r){if(e&&e.children&&!(e.children.length<=0)){var o=this;this.setItemOpened=function(e,a){o.panelEl.children("li").removeClass("open"),a.addClass("open"),e.loaded&&0==e.children.length&&a.addClass("no-child")},this.selectItemByCode=function(e,a){o.panelEl.children("li[code="+m(e)+"]").trigger("selectItem",[a])},this.setSelected=function(e,a){var l=o.panelEl.children("li[code="+m(e.code||e.c)+"]");l.children("a").addClass("selected"),a&&o.setItemOpened(e,l),o.scrollToOpened()},this.isMatchedSelectedItems=function(e,a){for(var l=e,n=e.level-1;0<=n;n--){var t=i.selectedItems[n],s=t.code||t.c,r=l.originData;if(s!=(r.code||r.c))return!1;if(!1===a)return!0;l=l.parent}return!0},this.scrollToOpened=function(){var e=o.panelEl,a=e.find("li.open");if(a.size()<=0&&(a=e.find("li a.selected").parent()),0<a.size()){var l=e.scrollTop(),n=a.position().top+l;l<n&&(n-=(e.height()-a.height())/2,e.scrollTop(n))}},this.destroy=function(){o.panelEl.children("li").removeData("cascaderItem"),o.panelEl.remove()},this.rePosition=function(e){if(e){var a=e.panelEl,l=Number((a.css("left")||"").replace("px",""));o.panelEl.css({left:l+a.outerWidth()})}};var c=function(e,a,l,n){if(i.params.lazy&&!1===e.loaded){a.addClass("bs-loading");var t=e.code||e.c;o.loadingItem&&(o.loadingItem=!1),o.loadingItem=t,i.loadData(e).then(function(){o.loadingItem==t&&i.refreshPanels(e.level+1,e,n)},function(){o.loadingItem==t&&a.addClass("load-error")}).always(function(){o.loadingItem==t&&(o.setItemOpened(e,a),o.loadingItem=!1),a.removeClass("bs-loading")})}else i.refreshPanels(e.level+1,e,n),o.setItemOpened(e,a),l&&i.selectItem(e,a)};o.panelEl=f(h).appendTo(i.el),o.data=e;var a=i.panels[i.panels.length-1];if(a){var l=a.panelEl,n=Number((l.css("left")||"").replace("px",""));o.panelEl.css({left:n+l.outerWidth()})}i.panels.push(o),0<i.panels.length&&(i.el.children(".dropdown-menu").removeClass("first-child last-child"),i.panels[0].panelEl.addClass("first-child"),i.panels[i.panels.length-1].panelEl.addClass("last-child"));var d=!1,p=!1;i.selectedItems.length>e.level&&(d=o.isMatchedSelectedItems(e)),f.each(e.children,function(e,l){var n=f(u).appendTo(o.panelEl),a=l.originData,t=a.name||a.n,s=a.code||a.c;n.data("cascaderItem",l).attr("code",s).attr("title",t).find(".text").text(t),n.on({selectItem:function(e,a){c(l,n,!1,a)},click:function(e,a){c(l,n,!0,a)},openDropdown:function(){c(l,n)}}),i.params.openOnHover&&n.on("mouseover",function(){i.openTimeout&&clearTimeout(i.openTimeout),i.openTimeout=setTimeout(function(){c(l,n)},i.params.lazy?i.params.openOnHoverDelay4Lazy:i.params.openOnHoverDelay)}),l.loaded&&(!l.children||l.children.length<=0)&&n.addClass("no-child"),i.selectedItems.length>=l.level&&d&&o.isMatchedSelectedItems(l,!1)&&(p=!0,i.selectedItems.length>l.level?c(l,n,!1,r):(i.selectedItems.length==i.panels.length&&f.each(i.selectedItems,function(e,a){i.panels[e].setSelected(a,e<i.selectedItems.length-1)}),r?r(l):(i.fireOnInit(),i.reloaded())))}),i.selectedItems.length>e.level&&!p&&i.params.lazy&&(i.isInitialized&&!i.reloading||(i.isInitialized?i.reloaded():i.fireOnInit()),r&&r())}},i=function(e,a){var c=this;for(var l in e=e||{},t)"undefined"==typeof e[l]&&(e[l]=t[l]);c.params=e,c.initialized=!1,c.selectedItems=[],c.readonly=!1,c.params.value instanceof Array&&(c.selectedItems=[]);var i=function(e,s){var r=c.params.lazy;f.each(e,function(e,a){var l=a.code||a.c,n=a.data||a.d,t=s.childMap[l];t?t.loaded=!r||n&&0<n.length||!1===a.hasChild:(t={childMap:{},children:[],loaded:!r||n&&0<n.length||!1===a.hasChild,level:s.level+1,parent:s,originData:a},s.children.push(t),s.childMap[l]=t),a.selectable!==undefined&&(t.selectable=a.selectable),n&&0<n.length&&i(n,t)})},o=function(e){c.btn.attr("title",e).children(".filter-option").text(e),0<c.getValue().length?c.btn.removeClass("bs-placeholder").addClass("selected"):c.btn.addClass("bs-placeholder").removeClass("selected")},n=function(e){if(c.el.hasClass("open")){var a=f(e.target).parents(".bootstrap-cascader");0==a.size()?c.close():a[0]!=c.el[0]&&c.close()}};c.setValue=function(e,a){a=f.extend({onSetFinish:f.noop},a||{});var l,n=[],t=c.getValue();if(c.clearValue(),!e||!(e instanceof Array)||e.length<=0)return a.fireInit?c.fireOnInit():l=c.fireOnChange(t,c.getValue()),void a.onSetFinish.call(c,l);if(c.params.forceSelect){var s=function(){f.each(e,function(e,a){c.selectedItems.push({code:a.code||a.c,name:a.name||a.n}),n.push(a.name||a.n)}),c.updateViewBySelected(function(e){e&&c.params.isSelectable(e)?o(n.join(c.params.splitChar)):c.clearValue(!1),a.fireInit?c.fireOnInit():l=c.fireOnChange(t,c.getValue()),a.onSetFinish.call(c,l)})};c.params.lazy&&c.params.loadDataByTreePath?c.loadDataByTreePath(e).then(function(){s()},function(){a.fireInit?c.fireOnInit():l=c.fireOnChange(t,c.getValue()),a.onSetFinish.call(c,l)}):s()}else f.each(e,function(e,a){c.selectedItems.push({code:a.code||a.c,name:a.name||a.n}),n.push(a.name||a.n)}),o(n.join(c.params.splitChar)),c.updateViewBySelected(),a.fireInit?c.fireOnInit():l=c.fireOnChange(t,c.getValue()),a.onSetFinish.call(c,l)},c.refreshPanels=function(e,a,l){var n=c.panels.splice(e-1,c.panels.length);n&&f.each(n,function(e,a){a.destroy()}),new d(a,c,l)},c.destroy=function(){f.each(c.panels,function(e,a){a.destroy()}),f("html").off("click",n),c.params.el.removeData("bsCascader")},c.selectItem=function(e,a){if(c.params.isSelectable.call(c,e)){c.el.find("li a").removeClass("selected"),a.children("a").addClass("selected"),c.el.find("li.open a").addClass("selected"),e=e||a.data("cascaderItem");var l=[],n=c.getValue();for(c.selectedItems=[];e.parent;){var t=e.originData,s=t.code||t.c,r=t.name||t.n;c.selectedItems.unshift({code:s,name:r}),l.unshift(r),e=e.parent}o(l.join(c.params.splitChar)),c.close(!1);var i=c.getValue();c.fireOnChange(n,i),c.params.el.trigger("bs.cascader.select",[i])}},c.fireOnChange=function(e,i){var a=!0;if(e!=i&&e.length==i.length){var o=!0;f.each(e,function(e,a){var l=a.code||a.c,n=a.name||a.n,t=i[e],s=t.code||t.c,r=t.name||t.n;if(l!=s||n!=r)return o=!1}),o&&(a=!1)}return a&&c.params.el.trigger("bs.cascader.change",[e,i]),a},c.close=function(e){c.el.removeClass("open"),!1!==e&&c.updateViewBySelected()},c.updateViewBySelected=function(e){0<c.selectedItems.length&&0<c.panels.length&&c.panels[0].selectItemByCode(c.selectedItems[0].code||c.selectedItems[0].c,e)},c.open=function(){var l;c.isReadonly()||(c.el.toggleClass("open"),f.each(c.panels,function(e,a){a.rePosition(l),a.scrollToOpened(),l=a}))},c.getValue=function(){return c.selectedItems.slice()},c.clearValue=function(e){c.selectedItems=[],c.el.find(".dropdown-menu li a").removeClass("selected"),o(c.params.placeHolder),e&&c.params.el.trigger("bs.cascader.clear")},c.setReadonly=function(e){e=!1!==e,(c.readonly=e)?(c.el.addClass("readonly"),c.btn.addClass("disabled")):(c.el.removeClass("readonly"),c.btn.removeClass("disabled"))},c.isReadonly=function(){return c.readonly},c.reload=function(){c.reloading=!0,c.data={childMap:{},children:[],loaded:!1,level:0},c.loadData().then(function(){c.refreshPanels(1,c.data),c.params.value&&c.setValue(c.params.value),c.params.lazy&&c.params.value||c.reloaded()})},c.reloaded=function(){c.reloading&&(c.reloading=!1,c.params.el.trigger("bs.cascader.reloaded"))},c.fireOnInit=function(){c.isInitialized||(c.isInitialized=!0,c.params.el.trigger("bs.cascader.inited"))},c.loadDataByTreePath=function(e){var a=f.Deferred();return c.params.loadDataByTreePath.call(c,e,function(e){e&&0<e.length?(c.data.originData||(c.data.originData=e),i(e,c.data),c.data.loaded=!0,a.resolve(e)):a.reject()}),a.promise()},c.loadData=function(a){var l=[];if(a)for(var e=a;e.parent;)l.unshift(e.originData),e=e.parent;else a=c.data;var n=f.Deferred();return c.params.loadData.call(c,l,function(e){e?(0<e.length&&((!l||l.length<=0)&&(c.data.originData=e),i(e,a)),a.loaded=!0,n.resolve(e)):n.reject()}),n.promise()},c.data={childMap:{},children:[],loaded:!1,level:0},c.panels=[],c.cols=[],c.el=f(s).addClass(c.params.cls),c.params.dropUp&&c.el.addClass("dropup"),c.params.replace?(c.el.insertAfter(e.el),e.el.hide()):c.el.appendTo(e.el),c.btn=f(r).addClass(e.btnCls).click(function(){c.open()}).appendTo(c.el),c.btn.children(".icon-cross").click(function(e){c.isReadonly()||(c.clearValue(!0),e.preventDefault(),e.stopPropagation())}),o(e.placeHolder),c.params.readonly&&c.setReadonly(!0),a.data("bsCascader",this),c.loadData().always(function(){c.refreshPanels(1,c.data),c.params.value?c.setValue(c.params.value,{fireInit:!0}):c.fireOnInit()}),f("html").on("click",n)};f.fn.bsCascader=function(l){var n=arguments;return this.each(function(){if(this){var e=f(this),a=e.data("bsCascader");a||"destroy"==l||(l=f.extend({el:e,value:e.val()?e.val().split(l.splitChar||" "):""},l),a=new i(l,e)),a&&"string"==typeof l&&a[l].apply(a,Array.prototype.slice.call(n,1))}})}}(jQuery);
//# sourceMappingURL=bootstrap-cascader.min.js.map
